# =================================================================================
# 🏗️ RBAC管理员服务器 - 开发环境配置
# =================================================================================
# 📋 开发环境特性：
#   - 使用内存SQLite数据库，无需安装数据库
#   - 启用详细日志和调试信息
#   - 禁用Redis，简化部署
#   - 启用性能分析和Swagger文档
#   - 宽松的安全策略，便于开发测试
#   - 允许所有CORS来源，便于前端开发
# =================================================================================

# 系统配置
system:
  ip: 127.0.0.1                # 监听IP
  port: 8080                   # 开发环境端口

# 数据库配置 - 开发环境使用内存SQLite，避免CGO依赖
# 生产环境请切换到MySQL或PostgreSQL
db:
  mode: "sqlite"                # 开发环境使用SQLite
  host: "localhost"
  port: 3306                   # SQLite不需要端口，但验证需要非零值
  user: ""
  password: ""
  dbname: "rbac_admin_dev"
  path: ":memory:"              # 使用内存数据库，避免文件系统依赖
  max_open_conns: 10           # 开发环境连接数较少
  max_idle_conns: 5
  conn_max_lifetime: 1h
  conn_max_idle_time: 30m

# 🔐 JWT配置 - 开发环境使用简单密钥
jwt:
  secret: "dev-secret-key-change-in-production"  # 开发环境密钥
  expire_hours: 24              # 24小时有效期
  refresh_expire_hours: 168    # 7天刷新有效期
  issuer: "rbac-admin-dev"     # 开发环境颁发者
  audience: "rbac-admin-dev"   # 开发环境受众

# Redis配置 - 开发环境禁用
redis:
  addr: ""                      # 开发环境禁用Redis
  password: ""
  db: 0

# 📝 日志配置 - 开发环境详细日志
log:
  level: "debug"               # 开发环境使用debug级别
  format: "text"               # 文本格式更易读
  output: "both"               # 同时输出到控制台和文件
  log_dir: "./logs/dev"        # 开发环境日志目录
  max_size: 10                 # 小文件便于查看
  max_age: 3                   # 保留3天
  max_backups: 3
  compress: false              # 不压缩便于查看
  enable_caller: true          # 显示调用位置
  enable_trace: true           # 显示堆栈跟踪

# ⚡ 性能配置 - 开发环境宽松限制
performance:
  enable_pprof: true           # 启用性能分析
  max_upload_size: "50MB"      # 开发环境较大上传限制
  request_rate_limit: 1000     # 开发环境无严格限制
  burst_rate_limit: 2000
  enable_compression: false    # 开发环境不压缩
  compression_level: 1

# 📂 文件上传配置
upload:
  max_file_size: "50MB"         # 开发环境较大限制
  allowed_extensions: [".jpg", ".jpeg", ".png", ".gif", ".pdf", ".txt", ".md"]
  allowed_mime_types: ["image/jpeg", "image/png", "image/gif", "application/pdf", "text/plain"]
  storage_type: "local"        # 本地存储
  storage_path: "./uploads/dev" # 开发环境上传目录
  max_files_per_request: 10

# 🔍 监控配置 - 开发环境全启用
monitoring:
  enable_health_check: true
  health_check_path: "/health"
  enable_metrics: true
  metrics_path: "/metrics"
  enable_tracing: false        # 开发环境禁用链路追踪
  tracing_endpoint: ""

# 🌐 CORS配置 - 开发环境允许所有来源
cors:
  enable: true
  allow_origins: ["*"]         # 开发环境允许所有来源
  allow_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
  allow_headers: ["*"]
  allow_credentials: true
  max_age: 12h

# 🔒 安全配置 - 开发环境宽松
security:
  bcrypt_cost: 10              # 开发环境使用标准成本
  max_login_attempts: 100       # 开发环境不限制登录尝试
  lock_duration_minutes: 1      # 开发环境短暂锁定
  session_timeout: 24h         # 开发环境长会话
  api_key_header: "X-API-Key"
  enable_csrf: false            # 开发环境可关闭CSRF
  csrf_secret: "dev-csrf-secret"

# 📚 Swagger配置 - 开发环境启用
swagger:
  enable: true
  title: "RBAC管理员API - 开发环境"
  description: "RBAC管理员服务器API文档 - 开发环境"
  version: "1.0.0-dev"
  host: "localhost:8080"
  base_path: "/api/v1"
  enable_ui: true

# 🎯 应用配置
app:
  name: "RBAC管理员 - 开发环境"
  version: "1.0.0-dev"
  environment: "development"
  debug: true