# ================================================
# RBAC管理员服务器 - 主配置文件
# 支持环境变量替换和配置验证
# ================================================

# 🖥️ 服务器配置
system:
  ip: 127.0.0.1               # 服务IP地址
  port: 8080                  # 服务端口

# 🗄️ 数据库配置
db:
  mode: mysql                  # 数据库类型: mysql, postgres, sqlite
  host: 192.168.10.199         # 数据库主机
  port: 3306                   # 数据库端口
  user: root                   # 数据库用户名
  password: Zdj_7819!          # 数据库密码（建议通过环境变量配置）
  dbname: rbacadmin            # 数据库名称
  max_open_conns: 100          # 最大连接数，防止连接耗尽
  max_idle_conns: 10           # 空闲连接数，提高响应速度
  conn_max_lifetime: 1h        # 连接生命周期
  conn_max_idle_time: 30m      # 空闲连接超时

# 🔄 Redis配置
redis:
  addr: 192.168.10.199:6379    # Redis地址
  password: ""                 # Redis密码
  db: 0                        # Redis数据库编号
  pool_size: 10                # 连接池大小
  min_idle_conns: 5            # 最小空闲连接数

# 📝 日志配置
log:
  level: "info"                # 日志级别: debug, info, warn, error
  format: "text"               # 日志格式: json, text
  output: "both"               # 输出方式: console, file, both
  log_dir: "./logs"            # 日志目录
  max_size: 100                # 最大文件大小(MB)
  max_backups: 3               # 最大备份文件数
  max_age: 7                   # 最大保存天数
  compress: true               # 是否压缩旧日志
  enable_caller: true          # 是否启用调用者信息
  enable_trace: false          # 是否启用追踪信息

# 🔐 JWT认证配置
jwt:
  secret: "aB3kL9mN7xY2qR8sT1uV4wE6zC0pF5gH"  # JWT密钥 (大小写字母+数字组合)
  expire_hours: 24                           # Token过期时间(小时)
  refresh_expire_hours: 168                  # 刷新Token过期时间(小时)
  issuer: "rbac-admin-server"                # Token签发者
  audience: "rbac-client"                    # Token受众

email:
    user: 315420498@qq.com  # 发送者邮箱地址
    password: zmkbniplmiqmbjag  # 授权密码
    Host: smtp.qq.com  # 邮箱服务器
    Port: 465  # 端口

captcha:
    enable: true


# 🌐 CORS配置
cors:
  enable: true                 # 是否启用CORS
  allow_origins:               # 允许的来源
    - "http://localhost:3000"
    - "http://localhost:8080"
  allow_methods:               # 允许的HTTP方法
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allow_headers:               # 允许的HTTP头
    - "Origin"
    - "Content-Type"
    - "Authorization"
  allow_credentials: true      # 是否允许凭证
  max_age: 3600                # 预检请求缓存时间

# 🔒 安全配置
security:
  enable_csrf: false           # 是否启用CSRF保护
  rate_limit: 100              # 每分钟请求限制
  xss_protection: true         # 是否启用XSS保护
  content_security_policy: "default-src 'self'"

# ⚡ 性能配置
performance:
  enable_gzip: true            # 是否启用Gzip压缩
  cache_size: 100              # 缓存大小(MB)
  request_timeout: 30s         # 请求超时时间

# 📤 上传配置
upload:
  enable: true                 # 是否启用文件上传
  max_size: 10                 # 最大文件大小(MB)
  save_path: "./uploads"       # 文件保存路径
  allow_types:                 # 允许的文件类型
    - "image/jpeg"
    - "image/png"
    - "application/pdf"

# 📊 监控配置
monitoring:
  enable: false                # 是否启用监控
  prometheus_port: 9090        # Prometheus监控端口

# 📚 Swagger配置
swagger:
  enable: true                 # 是否启用Swagger
  path: "/swagger/"            # Swagger路径
  title: "RBAC管理员系统API"     # Swagger标题
  description: "RBAC权限管理系统API文档"
  version: "1.0.0"             # API版本

# 📱 应用配置
app:
  name: "RBAC管理员系统"
  version: "1.0.0"
  description: "企业级RBAC权限管理解决方案"
  copyright: "© 2024 RBAC管理员系统团队"
