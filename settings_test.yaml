# =================================================================================
# 🏗️ RBAC管理员服务器 - 测试环境配置
# =================================================================================
# 📋 测试环境特性：
#   - 模拟生产环境配置，但使用测试数据
#   - 使用独立测试数据库，不影响生产数据
#   - 日志级别适中，便于测试调试
#   - 启用所有安全功能，模拟生产环境
# =================================================================================

# 系统配置
system:
  ip: 127.0.0.1                 # 测试环境监听IP
  port: 8081                    # 测试环境端口（避免与开发冲突）

# 数据库配置 - 测试环境使用独立MySQL数据库
db:
  mode: "mysql"                 # 测试环境使用MySQL
  host: "localhost"
  port: 3306
  user: "rbac_test"        # 测试数据库用户
  password: "test_password"    # 测试数据库密码
  dbname: "rbac_admin_test"    # 测试数据库名称
  max_open_conns: 50           # 测试环境适中连接数
  max_idle_conns: 10
  conn_max_lifetime: 1h
  conn_max_idle_time: 30m
  ssl_mode: "disable"          # 测试环境禁用SSL
  timeout: "10s"

# 🔐 JWT配置 - 测试环境使用独立密钥
jwt:
  secret: "test-jwt-secret-change-in-production"   # 测试环境密钥
  expire_hours: 1               # 测试环境短有效期，便于测试token刷新
  refresh_expire_hours: 2       # 测试环境短刷新期
  issuer: "rbac-admin-test"    # 测试环境颁发者
  audience: "rbac-admin-test"  # 测试环境受众

# Redis配置 - 测试环境使用DB2
redis:
  addr: "localhost:6379"      # Redis地址
  password: ""                  # 测试环境无密码
  db: 2                         # 测试环境使用DB2
  pool_size: 30
  min_idle_conns: 5

# 📝 日志配置 - 测试环境适中日志级别
log:
  level: "info"                # 测试环境使用info级别
  format: "json"               # JSON格式便于日志分析
  output: "file"               # 主要输出到文件
  log_dir: "./logs/test"       # 测试环境日志目录
  max_size: 50                 # 适中文件大小
  max_age: 7                   # 保留7天
  max_backups: 5
  compress: true               # 压缩节省空间
  enable_caller: true
  enable_trace: true

# ⚡ 性能配置 - 测试环境模拟生产限制
performance:
  enable_pprof: false          # 测试环境关闭性能分析
  max_upload_size: "10MB"       # 测试环境标准上传限制
  request_rate_limit: 100      # 测试环境合理限制
  burst_rate_limit: 200
  enable_compression: true     # 测试环境启用压缩
  compression_level: 6

# 📂 文件上传配置
upload:
  max_file_size: "10MB"         # 测试环境标准限制
  allowed_extensions: [".jpg", ".jpeg", ".png", ".gif", ".pdf"]
  allowed_mime_types: ["image/jpeg", "image/png", "image/gif", "application/pdf"]
  storage_type: "local"
  storage_path: "./uploads/test" # 测试环境上传目录
  max_files_per_request: 5

# 🔍 监控配置 - 测试环境启用监控
monitoring:
  enable_health_check: true
  health_check_path: "/health"
  enable_metrics: true
  metrics_path: "/metrics"
  enable_tracing: false         # 测试环境可关闭链路追踪
  tracing_endpoint: ""

# 🌐 CORS配置 - 测试环境严格配置
cors:
  enable: true
  allow_origins: ["http://localhost:3000", "http://test.rbac-admin.com"]  # 测试环境指定来源
  allow_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allow_headers: ["Content-Type", "Authorization", "X-Requested-With", "X-API-Key"]
  allow_credentials: true
  max_age: 1h

# 🔒 安全配置 - 测试环境启用所有安全功能
security:
  bcrypt_cost: 12              # 测试环境使用高安全级别
  max_login_attempts: 5        # 测试环境标准限制
  lock_duration_minutes: 30     # 测试环境标准锁定
  session_timeout: 2h          # 测试环境适中会话
  api_key_header: "X-API-Key"
  enable_csrf: true            # 测试环境启用CSRF保护
  csrf_secret: "test-csrf-secret-change-in-production"

# 📚 Swagger配置 - 测试环境可选
swagger:
  enable: true
  title: "RBAC管理员API - 测试环境"
  description: "RBAC管理员服务器API文档 - 测试环境"
  version: "1.0.0-test"
  host: "test.rbac-admin.com:8081"
  base_path: "/api/v1"
  enable_ui: true

# 🎯 应用配置
app:
  name: "RBAC管理员 - 测试环境"
  version: "1.0.0-test"
  environment: "testing"
  debug: false